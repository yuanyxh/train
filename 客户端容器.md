# 客户端容器

浏览器、微信、支付宝等都可以称为容器，提供通用接口，展示应用程序、提供交互（web 网页、小程序等）

## 浏览器架构

### 浏览器架构演进

- 单进程：一个进程管理所有模块
- 多进程：一个模块使用单独的进程管理
- 面向服务：UI、数据库、文件、网络等作为基础服务

## 浏览器渲染流程

- 输入 URL 并回车

- 网络进程

  - URL 发送至网络进程，网络进程查找是否有本地缓存，无则发起请求

  - DNS 域名解析，建立连接

  - 获取响应，响应状态为 301 或 302 则重定向至指定 URL，并重复上述流程

  - 网络进程和渲染进程建立连接传输数据

- 渲染进程

  - 构建 DOM 树
  - 构建 CSSOM 树
  - DOM 树 和 CSSOM 树合成 Layout 树
  - 布局
  - 分层

  - 合成线程绘制
  - 栅格化
  - 显示展示

推荐阅读：

- [浏览器如何渲染出一个完整的页面](https://juejin.cn/post/7028874226312413198)

### 网站性能分析与优化

网站优化：

- 压缩、分包、删除无用代码
- 静态资源分离
- JS 脚本非阻塞加载
- 缓存策略
- SSR
- 预制 loading、骨架屏

渲染优化：

- GPU 加速
- 减少重排、重绘
- 离屏渲染
- 懒加载

js 优化：

- 防止内存泄漏
- 减少循环
- 合理使用闭包
- 减少 DOM 访问
- 防抖、节流
- Web Workers

推荐阅读：

- [WEB 前端性能分析与优化，看这篇就够了](https://juejin.cn/post/6967156013464027143)

## 跨端容器

### WebView

网页视图，可内嵌在 App 中实现混合开发。

优点：

- 一次开发多端使用，学习成本低
- 热更新

### 小程序

基于 WebView 重构，视图逻辑分离（JS 无法操作 DOM），数据转发（Native 作中间层）

### React Native/WeeX

原生组件渲染（使用 Android、IOS 原生方式渲染），JSBridge 通信

### Lynx

Vue 构建、原生组件渲染

### Flutter

Wideget 输入，Native Api 输出多端 view

### 跨端通用原理

- UI 组件
- 渲染引擎
- 逻辑控制引擎
- 通信桥梁
- 底层 Api 抹平差异
